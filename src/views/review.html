{% extends "layout.html" %}

{% block content %}
<div class="container mb-8 mx-auto flex items-center w-full bg-red-100">
  <div class="w-full h-screen bg-white rounded shadow-lg p-8 m-4 md:max-w-sm md:mx-auto">
    <h1 class="block w-full text-center text-3xl text-grey-darkest mb-6">Review</h1>
    <form action="/review" method="post">
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <label class="block uppercase tracking-wide text-gray-700 text-s font-bold mb-2" for="name">Restaurant Name</label>
        <select class="form-input border py-2 px-3 text-grey-darkest md:mr-2" name="name">
          <option default>Select Restaurant</option>
           {% for name in names %}
             {%if name.key === selectedName %}
             <option value="{{ name.key }}" selected >{{ name.key }}</option>
             {%else %}
             <option value="{{ name.key }}">{{ name.name }}</option>
             {%endif %}
           {% endfor %} 
         </select>
      </div>
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <label class="block uppercase tracking-wide text-gray-700 text-s font-bold mb-2" for="name">Review</label>
        <textarea placeholder="type away" class="form-textarea text-grey-darkest flex-1 p-2 m-1 bg-transparent" name="review" id="review"></textarea>
      </div>
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <label class="block uppercase tracking-wide text-gray-700 text-s font-bold mb-2" for="name">Number of courses?</label>
        <input class="form-input border py-2 px-3 text-grey-darkest md:mr-2" type="text" name="courses" id="courses">
      </div>
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <label class="block uppercase tracking-wide text-gray-700 text-s font-bold mb-2" for="name">Meal names </label>
        <input class="form-input border py-2 px-3 text-grey-darkest md:mr-2" type="text" name="courses" id="courses">
      </div>
      <div class="w-full md:w-1/3 px-3 mb-6 md:mb-0">
        <input id="browse" type="file" onchange="previewFiles()" multiple>
        <div id="preview"></div>
      </div>  
     <br>
        {{ msg }}
     <br>
      <button type="submit" class="bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full">Submit</button>
    </form>
</div>
<script>
  function previewFiles() {

    var preview = document.querySelector('#preview');
    var files   = document.querySelector('input[type=file]').files;
  
    function readAndPreview(file) {
  
      // Make sure `file.name` matches our extensions criteria
      if ( /\.(jpe?g|png|gif)$/i.test(file.name) ) {
        var reader = new FileReader();
  
        reader.addEventListener("load", function () {
          var image = new Image();
          image.height = 100;
          image.title = file.name;
          image.src = this.result;
          preview.appendChild( image );
        }, false);
  
        reader.readAsDataURL(file);
      }
  
    }
  
    if (files) {
      [].forEach.call(files, readAndPreview);
    }
  
  }
  
</script>
</div>
{% endblock %}

